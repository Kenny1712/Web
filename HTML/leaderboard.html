<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Top N·∫°p NƒÉm</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="../Css/leaderboard.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg custom-navbar">
      <div class="container-fluid">
        <!-- Logo -->
        <a
          class="navbar-brand d-flex align-items-center"
          href="../HTML/index.html"
        >
          <img src="../Img/Game_logo.webp" alt="Logo" />
          <span>Game downloader</span>
        </a>

        <!-- N√∫t hamburger -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#mainNavbar"
          aria-controls="mainNavbar"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Menu -->
        <div
          class="collapse navbar-collapse justify-content-end"
          id="mainNavbar"
        >
          <ul class="navbar-nav mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="btn btn-search-nav ms-2" href="./search.html"
                >üîç T√¨m ki·∫øm game</a
              >
            </li>
            <li class="nav-item"><a class="nav-link" href="./new_game.html">Game m·ªõi</a></li>
            <li class="nav-item dropdown custom-dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="genreDropdown"
                role="button"
              >
                Th·ªÉ lo·∫°i
              </a>
              <ul
                class="dropdown-menu genre-menu"
                aria-labelledby="genreDropdown"
              >
                <li><a class="dropdown-item" href="./Game_hanh_dong.html">H√†nh ƒë·ªông</a></li>
                <li><a class="dropdown-item" href="./Game_phieu_luu.html">Phi√™u l∆∞u</a></li>
                <li><a class="dropdown-item" href="./Game_nhap_vai.html">Nh·∫≠p vai</a></li>
                <li><a class="dropdown-item" href="./Game_kinh_di.html">Kinh d·ªã</a></li>
                <li><a class="dropdown-item" href="./Game_the_thao.html">Th·ªÉ thao</a></li>
                <li><a class="dropdown-item" href="./Game_mo_phong.html">M√¥ ph·ªèng</a></li>
              </ul>
            </li>

            <!-- Khi ch∆∞a ƒëƒÉng nh·∫≠p -->
            <li class="nav-item">
              <a class="nav-link" href="./login.html" id="loginBtn"
                >ƒêƒÉng nh·∫≠p</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./register.html" id="registerBtn"
                >ƒêƒÉng k√Ω</a
              >
            </li>

            <!-- Khi ƒë√£ ƒëƒÉng nh·∫≠p -->
            <li
              class="nav-item dropdown user-dropdown"
              id="userDropdown"
              style="display: none"
            >
              <a
                class="nav-link dropdown-toggle d-flex align-items-center"
                href="#"
                id="userDropdownBtn"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <img id="userAvatar" src="../Img/user.jpg" alt="User" class="user-avatar" />
                <span id="userNameLabel" style="margin-left: 8px"></span>
              </a>
              <ul
                class="dropdown-menu user-menu dropdown-menu-end"
                aria-labelledby="userDropdownBtn"
              >
                <li>
                  <span class="dropdown-item-text" id="userEmail"
                    >dochibinh1981@gmail.com</span
                  >
                </li>
                <li>
  <span class="dropdown-item-text">
    S·ªë d∆∞: <span id="dropdownBalance" style="color: red">0 ƒë</span>
  </span>
</li>

                <li><hr class="dropdown-divider" /></li>
                <li><a class="dropdown-item" href="./profile.html">T√†i kho·∫£n</a></li>
                <li><a class="dropdown-item" href="./deposit_money.html">N·∫°p ti·ªÅn</a></li>
                <li><a class="dropdown-item" href="./leaderboard.html">Top n·∫°p ti·ªÅn</a></li>
                <li><a class="dropdown-item" href="./purchased.html">Game ƒë√£ mua</a></li>
                <li><hr class="dropdown-divider" /></li>
                <li>
                  <a class="dropdown-item" href="#" id="logoutBtnDropdown"
                    >ƒêƒÉng xu·∫•t</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <h1>TOP N·∫†P NƒÇM</h1>
      <table>
        <thead>
          <tr>
            <th>H·∫°ng</th>
            <th>T√™n t√†i kho·∫£n</th>
            <th>S·ªë ti·ªÅn ƒë√£ n·∫°p</th>
          </tr>
        </thead>
        <tbody id="leaderboardBody"></tbody>
      </table>
    </div>

    <script>
      const currentUser = localStorage.getItem("currentUser") || "Kenny";
      const userBalance =
        parseInt(localStorage.getItem("userBalance"));

      const topUsers = [
        { username: "N·∫°pNh·∫π70Tri·ªáu", balance: 70000000 },
        { username: "Th√≠chGankH∆°nFarm", balance: 68900000 },
        { username: "Ch∆°iV√¨ƒêamM√™", balance: 67500000 },
        { username: "Kh√¥ngT√™nKh√¥ngTu·ªïi", balance: 66850000 },
        { username: "Y√™uL·∫°iT·ª´ƒê·∫ßu", balance: 66000000 },
        { username: "Ng∆∞·ªùiCh∆°iH·ªáƒê·∫πp", balance: 65230000 },
        { username: "M·ªôtTh·ªùiƒê√£Xa", balance: 64950000 },
        { username: "S√°tTh·ªßKh√¥ngT√™n", balance: 64000000 },
        { username: "ƒê√°nhKh√¥ngTr∆∞·ª£tPh√°t", balance: 63050000 },
        { username: "ƒê·∫πpTraiNh∆∞ng·∫æ", balance: 62000000 },
        { username: "Ch∆°iKh√¥ngBi·∫øtM·ªát", balance: 61000000 },
        { username: "Ho√†ngT·ª≠Sigma", balance: 60000000 },
        { username: "Tr√πmCu·ªëiL√†ngGame", balance: 59000000 },
        { username: "C√†yChayKh√¥ngS·ª£Kh√≥", balance: 57890000 },
        { username: "V·∫´nC√≤nFA", balance: 56780000 },
        { username: "TeamKh√¥ngTh·ªÉThua", balance: 55000000 },
        { username: "C√∫ƒê·∫•mB·ªçcƒê∆∞·ªùng", balance: 53880000 },
        { username: "ƒêamM√™B·∫•tT·∫≠n", balance: 52900000 },
        { username: "H·ªìiSinhTh·∫ßnT·ªëc", balance: 51800000 },
        { username: "GameL√†L·∫ΩS·ªëng", balance: 50000000 },
      ];
      const fullList = [
        ...topUsers,
        { username: currentUser, balance: userBalance },
      ];
      fullList.sort((a, b) => b.balance - a.balance);

      const body = document.getElementById("leaderboardBody");

      // Top 20 hi·ªÉn th·ªã
      const slicedTop = fullList.slice(0, 20);
      let userInTop = false;
      let currentUserRank =
        fullList.findIndex((u) => u.username === currentUser) + 1;

      slicedTop.forEach((user, index) => {
        const tr = document.createElement("tr");

        if (user.username === currentUser) {
          tr.classList.add("footer-row");
          userInTop = true;
        } else if (index === 0) {
          tr.classList.add("top1");
        } else if (index === 1) {
          tr.classList.add("top2");
        } else if (index === 2) {
          tr.classList.add("top3");
        }

        let rank = index + 1;
        let icon = "";

        if (rank === 1) icon = "üëë";
        else if (rank === 2) icon = "ü•à";
        else if (rank === 3) icon = "ü•â";

        tr.innerHTML = `
  <td>${icon} ${rank}</td>
  <td>${user.username}</td>
  <td>${user.balance.toLocaleString()} ƒë</td>
`;

        body.appendChild(tr);
      });

      // D√≤ng cu·ªëi c√πng lu√¥n c√≥ currentUser n·ªïi b·∫≠t
      const footerRow = document.createElement("tr");
      footerRow.classList.add("footer-row");
      let footerIcon = "";
      if (userInTop) {
        if (currentUserRank === 1) footerIcon = "üëë ";
        else if (currentUserRank === 2) footerIcon = "ü•à ";
        else if (currentUserRank === 3) footerIcon = "ü•â ";
      }

      footerRow.innerHTML = `
  <td>${userInTop ? `${footerIcon}${currentUserRank}` : "20+"}</td>
  <td>${currentUser}</td>
  <td>${userBalance.toLocaleString()} ƒë</td>
`;

      body.appendChild(footerRow);
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const scrollBtn = document.getElementById("scrollToTop");
        if (scrollBtn) {
          scrollBtn.addEventListener("click", function () {
            const scrollStep = -window.scrollY / 50;
            const scrollInterval = setInterval(function () {
              if (window.scrollY !== 0) {
                window.scrollBy(0, scrollStep);
              } else {
                clearInterval(scrollInterval);
              }
            }, 10);
          });
        }
      });
    </script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const balance = localStorage.getItem("userBalance");
    const balanceEl = document.getElementById("dropdownBalance");
    if (balanceEl && balance !== null) {
      balanceEl.textContent = Number(balance).toLocaleString() + " ƒë";
    }
  });
</script>
<script>
      document.addEventListener("DOMContentLoaded", function () {
        const loginBtn = document.getElementById("loginBtn");
        const registerBtn = document.getElementById("registerBtn");
        const userDropdown = document.getElementById("userDropdown");
        const userNameLabel = document.getElementById("userNameLabel");
        const userEmailDisplay = document.getElementById("userEmail");
        const logoutBtnDropdown = document.getElementById("logoutBtnDropdown");

        const isLoggedIn = localStorage.getItem("loggedIn");
        const currentUser = localStorage.getItem("currentUser");
        const currentEmail = localStorage.getItem("currentEmail");

        if (isLoggedIn === "true" && currentUser) {
          if (loginBtn) loginBtn.style.display = "none";
          if (registerBtn) registerBtn.style.display = "none";
          if (userDropdown) userDropdown.style.display = "block";

          userNameLabel.textContent = currentUser;
          userEmailDisplay.textContent = currentEmail || "dochibinh1981@gmail.com";

          if (logoutBtnDropdown) {
            logoutBtnDropdown.addEventListener("click", function () {
              localStorage.removeItem("loggedIn");
              localStorage.removeItem("currentUser");
              localStorage.removeItem("currentEmail");
              location.reload();
            });
          }
        }
      });
    </script>
    <script>
  window.addEventListener("load", function () {
    const savedAvatar = localStorage.getItem("userAvatar");
    const avatarImg = document.getElementById("userAvatar");

    if (savedAvatar && avatarImg) {
      avatarImg.src = savedAvatar;
    }
  });
</script>
<button id="scrollToTop" title="L√™n ƒë·∫ßu trang">‚Üë</button>
  </body>
  <footer class="fancy-footer">
  <div class="footer-container">
    <div class="footer-section brand">
      <img src="../Img/Game_logo.webp" alt="Logo" />
      <h2>Game Downloader</h2>
      <p>T·∫£i game t·ªëc ƒë·ªô cao ‚Äì C·∫≠p nh·∫≠t game hot m·ªói ng√†y!</p>
    </div>

    <div class="footer-section links">
      <h3>Danh m·ª•c</h3>
      <ul>
        <li><a href="./index.html">Trang ch·ªß</a></li>
          <li><a href="./new_game.html">Game m·ªõi</a></li>
          <li><a href="./tintuc_1.html">Tin t·ª©c</a></li>
      </ul>
    </div>

    <div class="footer-section support">
      <h3>H·ªó tr·ª£</h3>
      <ul>
        <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
        <li><a href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
        <li><a href="#">Li√™n h·ªá</a></li>
        <li><a href="#">FAQs</a></li>
      </ul>
    </div>

    <div class="footer-section social">
      <h3>K·∫øt n·ªëi</h3>
      <div class="social-icons">
        <a href="#"><img src="../Img/Facebook.webp" alt="Facebook" /></a>
        <a href="#"><img src="../Img/YouTube.png" alt="YouTube" /></a>
        <a href="#"><img src="../Img/tiktok.jpg" alt="TikTok" /></a>
      </div>
    </div>
  </div>

  <div class="footer-bottom">
    <p>&copy; 2025 Game Downloader. All rights reserved.</p>
  </div>
</footer>
</html>
